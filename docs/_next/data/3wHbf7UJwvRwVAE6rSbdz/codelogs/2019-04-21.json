{"pageProps":{"codelog":{"tags":["dom","events","html","git"],"title":"2019-04-21","content":"<h2>Plan for the day</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> Continue watching <a href=\"https://frontendmasters.com/courses/web-development-v2/\">Complete Intro to Web Development, v2</a>.</li>\n</ul>\n<h2>Learned today</h2>\n<ul>\n<li>\n<p>The part of Brian's course I watched today was covering DOM and event listeners. He mentioned an interesting pattern for displaying an input character from a keystroke:</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"Type here!\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"input-to-copy\"</span>></span>\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"p-to-copy-to\"</span>></span>Nothing has happened yet.<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span>\n\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">script</span>></span><span class=\"javascript\">\n  <span class=\"hljs-keyword\">const</span> input = <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'.input-to-copy'</span>);\n  <span class=\"hljs-keyword\">const</span> paragraph = <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'.p-to-copy-to'</span>);\n\n  input.addEventListener(<span class=\"hljs-string\">'keyup'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>{\n      paragraph.innerText = input.value;\n  });\n</span><span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">script</span>></span></code></pre>\n<p>Notice that the listener is attached to the <code>keyup</code> event. If we used <code>keydown</code> instead, <code>paragraph.innerText</code> would be overwritten by a previous keystroke character, not the current one (e.g. typing <em>abc</em> would show <em>ab</em> in <code>paragraph</code>).</p>\n</li>\n<li>\n<p>All events are <em>bubbling</em> (by default, this can be disabled), meaning they fire up and then get trasfered to the parent element, then to grandparent, etc. until they reach the root element. It can come very handy when we'd want to attach a same-event listener to multiple elements, like so:</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"button-container\"</span>></span>\n  <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span>></span>1<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n  <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span>></span>2<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n  <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span>></span>3<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">script</span>></span><span class=\"javascript\">\n  <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'.button-container'</span>)\n    .addEventListener(<span class=\"hljs-string\">'click'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) </span>{\n      alert(<span class=\"hljs-string\">`You clicked on button <span class=\"hljs-subst\">${event.target.innerText}</span>`</span>);\n    });\n</span><span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">script</span>></span></code></pre>\n<p>In the example above we need only one <code>click</code> listener, as clicking on each button will bubble the event to its parent, where the listener is attached.</p>\n<p>It is important to add that clicking on <em>any</em> element in the parent element will trigger the event (e.g. an empty area next to the buttons). To prevent that, we can add an additional check for the target type:</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">script</span>></span><span class=\"javascript\">\n  <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'.button-container'</span>)\n    .addEventListener(<span class=\"hljs-string\">'click'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) </span>{\n      <span class=\"hljs-keyword\">if</span> (event.target.tagType === <span class=\"hljs-string\">'BUTTON'</span>) {\n        alert(<span class=\"hljs-string\">`You clicked on button <span class=\"hljs-subst\">${event.target.innerText}</span>`</span>);\n      }\n    });\n</span><span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">script</span>></span></code></pre>\n</li>\n<li>\n<p><code>event.stopPropagation()</code> stops the propagation of events at the moment of being called and after (events from before will successfully bubble).</p>\n</li>\n<li>\n<p>I moved to another computer where I had an outdated local copy of my repo. I wanted to update files with the current state and history of the remote, so I used <code>git pull origin master</code>. What I ended up with was:</p>\n<ul>\n<li>Commit merging the <code>master</code> branch</li>\n<li>The most recent remote commit</li>\n<li>2nd most recent remote commit</li>\n<li>...</li>\n<li>1st remote commit</li>\n<li>The most recent local commit</li>\n<li>...</li>\n<li>1st local commit</li>\n</ul>\n<p>Ooops... that is not what I wanted. Having the whole local history gave me all the outdated files from times I was experimenting with Jekyll layouts. Luckily, stackoverflow comes to the rescue as usual. What I need was:</p>\n<pre><code class=\"hljs language-bash\">git fetch --all\ngit reset --hard origin/master</code></pre>\n<p>The main question now is <strong>why</strong>? I'm adding that to my TODO!</p>\n</li>\n<li>\n<p>With my merge I somehow lost my custom CSS for <code>about</code> page images and I had to add it again. Just for the future reference (in case I mess up again), this is how you address specific images based on their source:</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">img</span><span class=\"hljs-selector-attr\">[src*=<span class=\"hljs-string\">\"#about-picture\"</span>]</span> {}</code></pre>\n</li>\n</ul>\n<h2>Resources list</h2>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1125968/how-do-i-force-git-pull-to-overwrite-local-files\">How to force <code>git pull</code> to overwrite local files</a></li>\n</ul>\n<h2>Other resources</h2>\n"}},"__N_SSG":true}