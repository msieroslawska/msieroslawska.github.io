<!DOCTYPE html><html lang="en"><head><link href="https://fonts.googleapis.com/css?family=DM+Sans:400,400i,700&amp;display=swap" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Space+Mono:400,400i,700&amp;display=swap" rel="stylesheet"/><title>2019-06-07</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/66484a3715798008541c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/66484a3715798008541c.css"/><link rel="preload" href="/_next/static/3wHbf7UJwvRwVAE6rSbdz/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/3wHbf7UJwvRwVAE6rSbdz/pages/codelogs/%5Bslug%5D.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.34684228d50c6c140f9e.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-57442645da4275d2ff59.js" as="script"/><link rel="preload" href="/_next/static/chunks/28d61e9cb2c5695fc7984cb90646605cb590dd23.9d410b191eaed73e5094.js" as="script"/></head><body><div id="__next"><div><section class="page-wrapper"><section class="sidebar"><nav class="nav"><div class="nav-link "><a>Home</a></div><div class="nav-link "><a>About</a></div><div class="nav-link "><a>Codelogs</a></div><div class="nav-link "><a>Articles</a></div><div class="nav-link "><a>Projects</a></div><div class="nav-link "><a>TODO</a></div></nav><footer class="footer"><p>Powered by <a href="https://nextjs.org/">next.js</a> and <a href="https://pages.github.com/">Github Pages</a></p></footer></section><main class="page-section"><h1 class="page-header">2019-06-07</h1><p>Tags: javascript,callback</p><section><h2>Plan for the day</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Continue watching <a href="https://frontendmasters.com/courses/javascript-hard-parts/">JavaScript: The Hard Parts</a> by Will Sentance</li>
</ul>
<h2>Learned today</h2>
<h3>Callback queue</h3>
<pre><code class="hljs language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printHello</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Hello'</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blockFor1Sec</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">//</span>
}

<span class="hljs-built_in">setTimeout</span>(printHello, <span class="hljs-number">0</span>);
blockFor1Sec();
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Me first'</span>);</code></pre>
<p>If the engine is busy executing a function (<code>blockFor1Sec</code>) and in the meantime <code>setTimeout</code>'s timer is done, then <code>printHello</code> is going to be added to <strong>callback queue</strong>. Anything in that queue is going to be pushed to call stack once it's <strong>empty</strong> and the global execution context has finished all its tasks (<code>console.log('Me first)</code>). And in our example, even though our <code>setTimeout</code> timer was set to 0, it was only executed after 1s.</p>
<p>The process of checking if call stack is ready to get anything from the callback queue and pushing to it is called <strong>event loop</strong>.</p>
<p>There are many things where waiting would block our thread and we are using browser APIs instead:</p>
<ul>
<li>a timer to finish running,</li>
<li>new information from server (Ajax),</li>
<li>indication that a protion of a page has loaded,</li>
<li>user interaction (clicks, mouseovers, etc.),</li>
<li>writing / reading to file system (node),</li>
<li>writing / reading database (node).</li>
</ul>
<h3><code>XMLHttpRequest</code></h3>
<pre><code class="hljs language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display</span>(<span class="hljs-params">data</span>) </span>{
  <span class="hljs-built_in">console</span>.log(data.post);
}

$.get(<span class="hljs-string">'http://twitter.com/willsen/tweet/1'</span>, display);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Me first'</span>);</code></pre>
<p>In the example above we only log the data, but there is no way to store it / pass into a variable. We could add another function inside <code>display</code> which would parse the data, but that leads to callback hell.</p>
<h2>Resources list</h2>
<h2>Other resources</h2>
</section></main></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"codelog":{"tags":["javascript","callback"],"title":"2019-06-07","content":"\u003ch2\u003ePlan for the day\u003c/h2\u003e\n\u003cul class=\"contains-task-list\"\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e Continue watching \u003ca href=\"https://frontendmasters.com/courses/javascript-hard-parts/\"\u003eJavaScript: The Hard Parts\u003c/a\u003e by Will Sentance\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eLearned today\u003c/h2\u003e\n\u003ch3\u003eCallback queue\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eprintHello\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e'Hello'\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eblockFor1Sec\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(printHello, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\nblockFor1Sec();\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e'Me first'\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf the engine is busy executing a function (\u003ccode\u003eblockFor1Sec\u003c/code\u003e) and in the meantime \u003ccode\u003esetTimeout\u003c/code\u003e's timer is done, then \u003ccode\u003eprintHello\u003c/code\u003e is going to be added to \u003cstrong\u003ecallback queue\u003c/strong\u003e. Anything in that queue is going to be pushed to call stack once it's \u003cstrong\u003eempty\u003c/strong\u003e and the global execution context has finished all its tasks (\u003ccode\u003econsole.log('Me first)\u003c/code\u003e). And in our example, even though our \u003ccode\u003esetTimeout\u003c/code\u003e timer was set to 0, it was only executed after 1s.\u003c/p\u003e\n\u003cp\u003eThe process of checking if call stack is ready to get anything from the callback queue and pushing to it is called \u003cstrong\u003eevent loop\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eThere are many things where waiting would block our thread and we are using browser APIs instead:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ea timer to finish running,\u003c/li\u003e\n\u003cli\u003enew information from server (Ajax),\u003c/li\u003e\n\u003cli\u003eindication that a protion of a page has loaded,\u003c/li\u003e\n\u003cli\u003euser interaction (clicks, mouseovers, etc.),\u003c/li\u003e\n\u003cli\u003ewriting / reading to file system (node),\u003c/li\u003e\n\u003cli\u003ewriting / reading database (node).\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ccode\u003eXMLHttpRequest\u003c/code\u003e\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003edisplay\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003edata\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(data.post);\n}\n\n$.get(\u003cspan class=\"hljs-string\"\u003e'http://twitter.com/willsen/tweet/1'\u003c/span\u003e, display);\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e'Me first'\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the example above we only log the data, but there is no way to store it / pass into a variable. We could add another function inside \u003ccode\u003edisplay\u003c/code\u003e which would parse the data, but that leads to callback hell.\u003c/p\u003e\n\u003ch2\u003eResources list\u003c/h2\u003e\n\u003ch2\u003eOther resources\u003c/h2\u003e\n"}},"__N_SSG":true},"page":"/codelogs/[slug]","query":{"slug":"2019-06-07"},"buildId":"3wHbf7UJwvRwVAE6rSbdz","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-2efeafdb249345ade087.js"></script><script async="" data-next-page="/_app" src="/_next/static/3wHbf7UJwvRwVAE6rSbdz/pages/_app.js"></script><script async="" data-next-page="/codelogs/[slug]" src="/_next/static/3wHbf7UJwvRwVAE6rSbdz/pages/codelogs/%5Bslug%5D.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" async=""></script><script src="/_next/static/chunks/commons.34684228d50c6c140f9e.js" async=""></script><script src="/_next/static/runtime/main-57442645da4275d2ff59.js" async=""></script><script src="/_next/static/chunks/28d61e9cb2c5695fc7984cb90646605cb590dd23.9d410b191eaed73e5094.js" async=""></script><script src="/_next/static/3wHbf7UJwvRwVAE6rSbdz/_buildManifest.js" async=""></script><script src="/_next/static/3wHbf7UJwvRwVAE6rSbdz/_ssgManifest.js" async=""></script></body></html>