<!DOCTYPE html><html lang="en"><head><link href="https://fonts.googleapis.com/css?family=DM+Sans:400,400i,700&amp;display=swap" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Space+Mono:400,400i,700&amp;display=swap" rel="stylesheet"/><title>2019-06-02</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/66484a3715798008541c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/66484a3715798008541c.css"/><link rel="preload" href="/_next/static/LBpfXZdWlV2p0St5YANM-/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/LBpfXZdWlV2p0St5YANM-/pages/codelogs/%5Bslug%5D.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.34684228d50c6c140f9e.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-57442645da4275d2ff59.js" as="script"/><link rel="preload" href="/_next/static/chunks/49f65eee51eac7caa83c1e2f549522aa9179da53.9d410b191eaed73e5094.js" as="script"/></head><body><div id="__next"><div><section class="page-wrapper"><section class="sidebar"><nav class="nav"><div class="nav-link "><a>Home</a></div><div class="nav-link "><a>About</a></div><div class="nav-link "><a>Codelogs</a></div><div class="nav-link "><a>Articles</a></div><div class="nav-link "><a>Projects</a></div><div class="nav-link "><a>TODO</a></div></nav><footer class="footer"><p>Powered by <a href="https://nextjs.org/">next.js</a> and <a href="https://pages.github.com/">Github Pages</a></p></footer></section><main class="page-section"><h1 class="page-header">2019-06-02</h1><p>Tags: javascript,closures,scope</p><section><h2>Plan for the day</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked disabled> Continue watching <a href="https://frontendmasters.com/courses/javascript-hard-parts/">JavaScript: The Hard Parts</a> by Will Sentance</li>
</ul>
<h2>Learned today</h2>
<h3>Closures</h3>
<p>When functions get called, we create a live stote of data (variable environment) for that function's execution context. When it finishes executing, its local memory is deleted (except the returned value).</p>
<pre><code class="hljs language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">instructionGenerator</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiplyBy2</span>(<span class="hljs-params">num</span>) </span>{
    <span class="hljs-keyword">return</span> num * <span class="hljs-number">2</span>;
  }
}
<span class="hljs-keyword">let</span> generatedFunc = instructionGenerator();
<span class="hljs-keyword">let</span> result = generatedFunc(<span class="hljs-number">3</span>); <span class="hljs-comment">// 6</span></code></pre>
<p>In the example above, calling <code>instructionGenerator</code> returns a function, which gets assigned into <code>generatedFunc</code>. <code>multiplyBy2</code> is no longer available under that label, it is accessible under <code>generatedFunc</code>.</p>
<p><em>Where</em> you define your functions determines what variables they will have access to when called.</p>
<p>If you try to call inner function outside of where it was defined, it <strong>will not</strong> work:</p>
<pre><code class="hljs language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">outer</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">incrementCounter</span>(<span class="hljs-params"></span>) </span>{
    counter++;
  }
  incrementCounter();
}
outer();
incrementCounter(); <span class="hljs-comment">// ReferenceError: incrementCounter is not defined</span></code></pre>
<p>To keep access to the inner function, you can return it and assign it to a new variable:</p>
<pre><code class="hljs language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">outer</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">incrementCounter</span>(<span class="hljs-params"></span>) </span>{
    counter++;
  }
  <span class="hljs-keyword">return</span> incrementedCounter;
}

<span class="hljs-keyword">let</span> myFunction = outer();
myFunction();</code></pre>
<p>Again, <strong>where (when) you define a function</strong> (not where you call it) determines what variables it has access to when you call it. In the example above, <code>incrementCounter</code> had access to <code>counter</code> when it was defined. Behind the scenes, <code>incrementCounter</code> also got access to all the surrounding data. Returning it returns the function AND the surrounding data (but only data which is needed).</p>
<h4>Lexical scope</h4>
<p>When a function is defined, it gets a <code>[[scope]]</code> property that references the <em>Variable Environment</em> in which it has been defined. When looking for a variable definition, it first looks in its local scope, then in <code>[[scope]]</code> and only after that goes down to scopes from the call stack. This is why JS is called <em>lexically / statically scoped</em>.</p>
<h2>Resources list</h2>
<h2>Other resources</h2>
</section></main></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"codelog":{"tags":["javascript","closures","scope"],"title":"2019-06-02","content":"\u003ch2\u003ePlan for the day\u003c/h2\u003e\n\u003cul class=\"contains-task-list\"\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" checked disabled\u003e Continue watching \u003ca href=\"https://frontendmasters.com/courses/javascript-hard-parts/\"\u003eJavaScript: The Hard Parts\u003c/a\u003e by Will Sentance\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eLearned today\u003c/h2\u003e\n\u003ch3\u003eClosures\u003c/h3\u003e\n\u003cp\u003eWhen functions get called, we create a live stote of data (variable environment) for that function's execution context. When it finishes executing, its local memory is deleted (except the returned value).\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003einstructionGenerator\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emultiplyBy2\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003enum\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e num * \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;\n  }\n}\n\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e generatedFunc = instructionGenerator();\n\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e result = generatedFunc(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 6\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the example above, calling \u003ccode\u003einstructionGenerator\u003c/code\u003e returns a function, which gets assigned into \u003ccode\u003egeneratedFunc\u003c/code\u003e. \u003ccode\u003emultiplyBy2\u003c/code\u003e is no longer available under that label, it is accessible under \u003ccode\u003egeneratedFunc\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eWhere\u003c/em\u003e you define your functions determines what variables they will have access to when called.\u003c/p\u003e\n\u003cp\u003eIf you try to call inner function outside of where it was defined, it \u003cstrong\u003ewill not\u003c/strong\u003e work:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eouter\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e counter = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eincrementCounter\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    counter++;\n  }\n  incrementCounter();\n}\nouter();\nincrementCounter(); \u003cspan class=\"hljs-comment\"\u003e// ReferenceError: incrementCounter is not defined\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo keep access to the inner function, you can return it and assign it to a new variable:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eouter\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e counter = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eincrementCounter\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    counter++;\n  }\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e incrementedCounter;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e myFunction = outer();\nmyFunction();\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAgain, \u003cstrong\u003ewhere (when) you define a function\u003c/strong\u003e (not where you call it) determines what variables it has access to when you call it. In the example above, \u003ccode\u003eincrementCounter\u003c/code\u003e had access to \u003ccode\u003ecounter\u003c/code\u003e when it was defined. Behind the scenes, \u003ccode\u003eincrementCounter\u003c/code\u003e also got access to all the surrounding data. Returning it returns the function AND the surrounding data (but only data which is needed).\u003c/p\u003e\n\u003ch4\u003eLexical scope\u003c/h4\u003e\n\u003cp\u003eWhen a function is defined, it gets a \u003ccode\u003e[[scope]]\u003c/code\u003e property that references the \u003cem\u003eVariable Environment\u003c/em\u003e in which it has been defined. When looking for a variable definition, it first looks in its local scope, then in \u003ccode\u003e[[scope]]\u003c/code\u003e and only after that goes down to scopes from the call stack. This is why JS is called \u003cem\u003elexically / statically scoped\u003c/em\u003e.\u003c/p\u003e\n\u003ch2\u003eResources list\u003c/h2\u003e\n\u003ch2\u003eOther resources\u003c/h2\u003e\n"}},"__N_SSG":true},"page":"/codelogs/[slug]","query":{"slug":"2019-06-02"},"buildId":"LBpfXZdWlV2p0St5YANM-","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-2efeafdb249345ade087.js"></script><script async="" data-next-page="/_app" src="/_next/static/LBpfXZdWlV2p0St5YANM-/pages/_app.js"></script><script async="" data-next-page="/codelogs/[slug]" src="/_next/static/LBpfXZdWlV2p0St5YANM-/pages/codelogs/%5Bslug%5D.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" async=""></script><script src="/_next/static/chunks/commons.34684228d50c6c140f9e.js" async=""></script><script src="/_next/static/runtime/main-57442645da4275d2ff59.js" async=""></script><script src="/_next/static/chunks/49f65eee51eac7caa83c1e2f549522aa9179da53.9d410b191eaed73e5094.js" async=""></script><script src="/_next/static/LBpfXZdWlV2p0St5YANM-/_buildManifest.js" async=""></script><script src="/_next/static/LBpfXZdWlV2p0St5YANM-/_ssgManifest.js" async=""></script></body></html>